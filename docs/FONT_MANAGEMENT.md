# ä¸­æ–‡å­—ä½“ç®¡ç†æŒ‡å—

æœ¬é¡¹ç›®å·²ç»æ•´åˆäº†å®Œæ•´çš„ä¸­æ–‡å­—ä½“ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸‹éƒ½èƒ½æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡å­—ç¬¦ã€‚

## ğŸ¯ æ¦‚è¿°

äººè„¸è¯†åˆ«ç³»ç»Ÿéœ€è¦åœ¨å›¾åƒä¸Šç»˜åˆ¶ä¸­æ–‡æ–‡å­—ï¼ˆå¦‚äººå‘˜å§“åã€è¯†åˆ«ç»“æœç­‰ï¼‰ï¼Œä¸ºç¡®ä¿éƒ¨ç½²çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

1. **é¡¹ç›®å†…ç½®å­—ä½“**: å°†å¿…è¦çš„ä¸­æ–‡å­—ä½“å¤åˆ¶åˆ°é¡¹ç›®ç›®å½•ä¸­
2. **ç»Ÿä¸€å­—ä½“ç®¡ç†**: ä½¿ç”¨å­—ä½“ç®¡ç†å™¨ç»Ÿä¸€å¤„ç†å­—ä½“åŠ è½½å’Œå›é€€
3. **Dockeré›†æˆ**: åœ¨å®¹å™¨ä¸­è‡ªåŠ¨å®‰è£…å’Œé…ç½®å­—ä½“

## ğŸ“ å­—ä½“æ–‡ä»¶ä½ç½®

```
assets/fonts/
â”œâ”€â”€ wqy-microhei.ttc    # æ–‡æ³‰é©¿å¾®ç±³é»‘ (4.9MB) - ä¸»è¦å­—ä½“
â””â”€â”€ wqy-zenhei.ttc      # æ–‡æ³‰é©¿æ­£é»‘ (16.0MB) - å¤‡ç”¨å­—ä½“
```

è¿™äº›å­—ä½“æ–‡ä»¶ä¼šéšé¡¹ç›®ä¸€èµ·æ‰“åŒ…ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸ä½¿ç”¨ã€‚

## ğŸ”§ å­—ä½“ç®¡ç†å™¨

### æ ¸å¿ƒæ–‡ä»¶
- `src/utils/font_manager.py` - å­—ä½“ç®¡ç†å™¨æ ¸å¿ƒ
- `scripts/font_manager.py` - å­—ä½“ç®¡ç†CLIå·¥å…·

### å­—ä½“æŸ¥æ‰¾ä¼˜å…ˆçº§
1. **é¡¹ç›®å†…å­—ä½“** (æœ€é«˜ä¼˜å…ˆçº§)
   - `assets/fonts/wqy-microhei.ttc`
   - `assets/fonts/wqy-zenhei.ttc`

2. **Linuxç³»ç»Ÿå­—ä½“**
   - æ–‡æ³‰é©¿å­—ä½“
   - Noto CJKå­—ä½“
   - Droidå­—ä½“

3. **Windowsç³»ç»Ÿå­—ä½“**
   - é»‘ä½“ (simhei.ttf)
   - å®‹ä½“ (simsun.ttc)
   - å¾®è½¯é›…é»‘ (msyh.ttc)

4. **macOSç³»ç»Ÿå­—ä½“**
   - è‹¹æ–¹ (PingFang.ttc)
   - å†¬é’é»‘ä½“ (Hiragino Sans GB.ttc)

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“ç®¡ç†å™¨

```python
from src.utils.font_manager import get_font_manager

# è·å–å­—ä½“ç®¡ç†å™¨å®ä¾‹
font_manager = get_font_manager()

# è·å–æŒ‡å®šå¤§å°çš„å­—ä½“
font = font_manager.get_font(size=20)

# è·å–æ–‡æœ¬æ¸²æŸ“å°ºå¯¸
text_size = font_manager.get_text_size("ä¸­æ–‡æµ‹è¯•", font_size=20)
```

### ä½¿ç”¨CLIå·¥å…·ç®¡ç†å­—ä½“

```bash
# æ£€æŸ¥å­—ä½“ç¯å¢ƒ
python scripts/font_manager.py check

# åˆ—å‡ºæ‰€æœ‰å¯ç”¨å­—ä½“
python scripts/font_manager.py list

# å®‰è£…é¡¹ç›®å­—ä½“ï¼ˆä»ç³»ç»Ÿå¤åˆ¶åˆ°é¡¹ç›®ï¼‰
python scripts/font_manager.py install

# æµ‹è¯•å­—ä½“æ¸²æŸ“
python scripts/font_manager.py test --text "æµ‹è¯•æ–‡æœ¬"
```

## ğŸ³ Dockeréƒ¨ç½²

### Dockerfileé…ç½®

```dockerfile
# å®‰è£…ç³»ç»Ÿä¸­æ–‡å­—ä½“
RUN apt-get update && apt-get install -y \
    fonts-wqy-microhei \
    fonts-wqy-zenhei \
    fontconfig \
    && fc-cache -fv

# å¤åˆ¶é¡¹ç›®å­—ä½“
COPY assets/fonts/ assets/fonts/
```

è¿™ç¡®ä¿äº†å®¹å™¨å†…æ—¢æœ‰ç³»ç»Ÿå­—ä½“ä¹Ÿæœ‰é¡¹ç›®å­—ä½“ï¼Œæä¾›åŒé‡ä¿éšœã€‚

## ğŸ“Š å­—ä½“ä½¿ç”¨ç»Ÿè®¡

- **é¡¹ç›®å†…å­—ä½“**: 2ä¸ª (20.9MBæ€»å¤§å°)
- **ç³»ç»Ÿæ”¯æŒå­—ä½“**: 14ä¸ªä¸­æ–‡å­—ä½“
- **å­—ä½“æŸ¥æ‰¾è·¯å¾„**: 17ä¸ªå€™é€‰è·¯å¾„
- **æ”¯æŒå¹³å°**: Linuxã€Windowsã€macOS

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1: ä¸­æ–‡æ˜¾ç¤ºä¸ºæ–¹å—æˆ–é—®å·
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥å­—ä½“ç¯å¢ƒ
python scripts/font_manager.py check

# å®‰è£…ç¼ºå¤±å­—ä½“
python scripts/font_manager.py install
```

### é—®é¢˜2: Dockerå®¹å™¨ä¸­å­—ä½“ä¸ç”Ÿæ•ˆ
**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœ¨å®¹å™¨å†…å®‰è£…å­—ä½“åŒ…
apt-get update && apt-get install -y fonts-wqy-microhei fonts-wqy-zenhei

# åˆ·æ–°å­—ä½“ç¼“å­˜
fc-cache -fv
```

### é—®é¢˜3: å­—ä½“åŠ è½½å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
```python
# æ£€æŸ¥å­—ä½“ç®¡ç†å™¨æ—¥å¿—
import logging
logging.basicConfig(level=logging.DEBUG)

from src.utils.font_manager import get_font_manager
font_manager = get_font_manager()
available_fonts = font_manager.get_available_fonts()
```

## ğŸ”„ æ›´æ–°å­—ä½“

å¦‚éœ€æ·»åŠ æ–°å­—ä½“ï¼š

1. å°†å­—ä½“æ–‡ä»¶å¤åˆ¶åˆ° `assets/fonts/` ç›®å½•
2. æ›´æ–° `src/utils/font_manager.py` ä¸­çš„å­—ä½“æœç´¢è·¯å¾„
3. è¿è¡Œæµ‹è¯•éªŒè¯å­—ä½“å¯ç”¨æ€§

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **å­—ä½“ç¼“å­˜**: å­—ä½“å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼Œé¿å…é‡å¤åŠ è½½
- **æ™ºèƒ½å›é€€**: è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„å¯ç”¨å­—ä½“
- **å°ºå¯¸è®¡ç®—**: ä¼˜åŒ–çš„æ–‡æœ¬å°ºå¯¸è®¡ç®—ç®—æ³•

## âœ… éªŒè¯æ¸…å•

éƒ¨ç½²å‰è¯·ç¡®è®¤ï¼š

- [ ] `assets/fonts/` ç›®å½•åŒ…å«å¿…è¦å­—ä½“æ–‡ä»¶
- [ ] è¿è¡Œ `python scripts/font_manager.py check` é€šè¿‡
- [ ] è¿è¡Œ `python scripts/font_manager.py test` ç”Ÿæˆæµ‹è¯•å›¾åƒ
- [ ] Dockeræ„å»ºåŒ…å«å­—ä½“å®‰è£…æ­¥éª¤
- [ ] åº”ç”¨ä»£ç ä½¿ç”¨ç»Ÿä¸€çš„å­—ä½“ç®¡ç†å™¨

---

é€šè¿‡è¿™å¥—å®Œæ•´çš„å­—ä½“ç®¡ç†æ–¹æ¡ˆï¼Œé¡¹ç›®å¯ä»¥åœ¨ä»»ä½•ç¯å¢ƒä¸‹ç¨³å®šåœ°æ˜¾ç¤ºä¸­æ–‡å­—ç¬¦ï¼Œæ— éœ€æ‹…å¿ƒå­—ä½“ç¼ºå¤±æˆ–å…¼å®¹æ€§é—®é¢˜ã€‚
